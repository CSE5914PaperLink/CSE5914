{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/athinshetty/Documents/VSCode%20work/capstone/CSE5914/frontend/app/discovery/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ninterface ArxivResult {\n  arxiv_id: string;\n  title: string;\n  summary: string;\n  published?: string;\n  authors: string[];\n  pdf_url?: string | null;\n}\n\ninterface SearchFilters {\n  from_date?: string;\n  to_date?: string;\n  min_citations?: number;\n  is_oa?: boolean;\n  has_fulltext?: boolean;\n}\n\nexport default function DiscoveryPage() {\n  const [query, setQuery] = useState(\"\");\n  const [filters, setFilters] = useState<SearchFilters>({});\n  const [showFilters, setShowFilters] = useState(false);\n  const [papers, setPapers] = useState<ArxivResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const truncate = (text: string, n = 300) =>\n    text.length > n ? text.slice(0, n) + \"...\" : text;\n\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const params = new URLSearchParams({ q: query, max_results: \"10\" });\n      const res = await fetch(`/api/discovery/search?${params.toString()}`);\n      if (!res.ok) {\n        throw new Error(`Search failed: ${res.statusText}`);\n      }\n      const data = await res.json();\n      setPapers(data.results || []);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to search papers\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPaper = async (arxivId: string) => {\n    try {\n      const res = await fetch(\n        `/api/library/add?arxiv_id=${encodeURIComponent(arxivId)}`,\n        { method: \"POST\" }\n      );\n      if (!res.ok) throw new Error(\"Failed to add paper\");\n      alert(\"Paper added to library\");\n    } catch (e) {\n      alert((e as Error).message);\n    }\n  };\n\n  const handleUpload = () => {\n    // Placeholder for file upload\n    alert(\"Upload functionality coming soon\");\n  };\n\n  return (\n    <div className=\"bg-gray-50 min-h-screen\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Discover Papers\n          </h1>\n          <p className=\"text-gray-600\">\n            Search arXiv papers and build your collection\n          </p>\n        </div>\n\n        {/* Search Bar */}\n        <form onSubmit={handleSearch} className=\"mb-6\">\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <div className=\"flex items-center gap-2 mb-3\">\n              <input\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Search for papers by keyword, author, or topic...\"\n                className=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900\"\n              />\n              <button\n                type=\"button\"\n                onClick={handleUpload}\n                className=\"px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center gap-2 text-black\"\n                title=\"Upload PDF\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-700\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n                  ></path>\n                </svg>\n                Upload\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n              >\n                {loading ? \"Searching...\" : \"Search\"}\n              </button>\n            </div>\n\n            {/* Filter Toggle */}\n            <button\n              type=\"button\"\n              onClick={() => setShowFilters(!showFilters)}\n              className=\"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1\"\n            >\n              <svg\n                className=\"w-4 h-4\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n                ></path>\n              </svg>\n              {showFilters ? \"Hide Filters\" : \"Show Filters\"}\n            </button>\n\n            {/* Filters Panel */}\n            {showFilters && (\n              <div className=\"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    From Date\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={filters.from_date || \"\"}\n                    onChange={(e) =>\n                      setFilters({ ...filters, from_date: e.target.value })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    To Date\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={filters.to_date || \"\"}\n                    onChange={(e) =>\n                      setFilters({ ...filters, to_date: e.target.value })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Min Citations\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    value={filters.min_citations || \"\"}\n                    onChange={(e) =>\n                      setFilters({\n                        ...filters,\n                        min_citations: e.target.value\n                          ? parseInt(e.target.value)\n                          : undefined,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900\"\n                  />\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  <label className=\"flex items-center gap-2 text-sm text-gray-700\">\n                    <input\n                      type=\"checkbox\"\n                      checked={filters.is_oa || false}\n                      onChange={(e) =>\n                        setFilters({\n                          ...filters,\n                          is_oa: e.target.checked ? true : undefined,\n                        })\n                      }\n                      className=\"rounded border-gray-300\"\n                    />\n                    Open Access Only\n                  </label>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  <label className=\"flex items-center gap-2 text-sm text-gray-700\">\n                    <input\n                      type=\"checkbox\"\n                      checked={filters.has_fulltext || false}\n                      onChange={(e) =>\n                        setFilters({\n                          ...filters,\n                          has_fulltext: e.target.checked ? true : undefined,\n                        })\n                      }\n                      className=\"rounded border-gray-300\"\n                    />\n                    Has Full Text\n                  </label>\n                </div>\n              </div>\n            )}\n          </div>\n        </form>\n\n        {/* Error Display */}\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6\">\n            {error}\n          </div>\n        )}\n\n        {/* Results */}\n        <div className=\"space-y-4\">\n          {papers.length === 0 && !loading && !error && (\n            <div className=\"text-center py-12 text-gray-500\">\n              <svg\n                className=\"w-16 h-16 mx-auto mb-4 text-gray-400\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"2\"\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                ></path>\n              </svg>\n              <p className=\"text-lg\">Start by searching for papers above</p>\n            </div>\n          )}\n\n          {papers.map((paper) => (\n            <div\n              key={paper.arxiv_id}\n              className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {paper.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mb-3\">\n                    {paper.authors.slice(0, 5).join(\", \")}\n                    {paper.authors.length > 5 &&\n                      ` +${paper.authors.length - 5} more`}\n                  </p>\n                  <p className=\"text-gray-700 text-sm leading-relaxed mb-3\">\n                    {truncate(paper.summary || \"No abstract available\")}\n                  </p>\n                  <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                    {paper.published && (\n                      <span>ðŸ“… {paper.published.split(\"T\")[0]}</span>\n                    )}\n                    {paper.pdf_url && (\n                      <a\n                        href={paper.pdf_url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 hover:underline\"\n                      >\n                        PDF\n                      </a>\n                    )}\n                  </div>\n                </div>\n                <button\n                  onClick={() => handleAddPaper(paper.arxiv_id)}\n                  className=\"shrink-0 w-10 h-10 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors\"\n                  title=\"Add to collection\"\n                >\n                  <svg\n                    className=\"w-5 h-5\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M12 4v16m8-8H4\"\n                    ></path>\n                  </svg>\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}